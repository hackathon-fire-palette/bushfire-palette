<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hazard Information - Australian Bushfire Alert System</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#c0392b" />
</head>
<body>
  <div class="accessibility-bar" aria-label="Accessibility and language options">
    <button id="darkModeToggle" aria-label="Toggle dark mode" tabindex="0">üåô Dark Mode</button>
    <button id="contrastToggle" aria-label="Toggle high contrast" tabindex="0">‚¨õ High Contrast</button>
    <button id="colorBlindToggle" aria-label="Toggle color blind friendly palette" tabindex="0">üé® Color Blind</button>
    <div class="font-size-controls">
      <button id="decreaseFontSize" aria-label="Decrease font size" tabindex="0">A-</button>
      <button id="increaseFontSize" aria-label="Increase font size" tabindex="0">A+</button>
    </div>
    <button id="voiceAlertToggle" aria-label="Toggle voice alerts" tabindex="0">üîä Voice Alerts</button>
    <select id="languageSelect" aria-label="Select language" tabindex="0">
      <option value="en">English</option>
      <option value="zh">‰∏≠Êñá</option>
      <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
      <option value="noongar">Noongar</option>
    </select>
  </div>
  <header>
    <div class="logo-title">
      <a href="/">
        <img src="assets/WhatsApp Image 2025-08-18 at 14.35.52.jpeg" alt="Bushfire Detection Logo" width="60" height="60">
      </a>
      <h1 style="color: red;">Australian Bushfire Alert System</h1>
    </div>
    <nav>
      <a href="index.html">Dashboard</a>
      <a href="roster.html">Roster</a>
      <a href="vehicle.html">Vehicle Tracking</a>
      <a href="compliance.html">Compliance</a>
      <a href="hazard.html" class="active">Hazard Information</a>
      <a href="about.html">About</a>
    </nav>
  </header>
  <main>
    <section class="hazard-map-section card">
      <h2>Live Hazard Map</h2>
      <div style="display:flex;align-items:center;gap:0.5em;margin-bottom:0.7em;">
        <input
          id="locationSearchInput"
          type="text"
          placeholder="Search location or address‚Ä¶"
          style="flex:1;padding:0.5em 1em;border-radius:6px;border:1px solid #ccc;font-size:1em;"
          aria-label="Search location"
        />
        <button
          id="findMeBtn"
          style="padding:0.5em 1em;border-radius:6px;background:#1976d2;color:#fff;border:none;cursor:pointer;font-size:1em;"
          aria-label="Find my location"
          title="Find my location"
        >üìç Find Me</button>
      </div>
      <div style="margin-bottom:0.7em;">
        <label><input type="checkbox" id="toggleBushfires" checked> Bushfires</label>
        <label style="margin-left:1em;"><input type="checkbox" id="toggleFloods"> Floods</label>
        <label style="margin-left:1em;"><input type="checkbox" id="toggleStormDamage"> Storm Damage</label>
        <label style="margin-left:1em;"><input type="checkbox" id="toggleHeatwaveWarnings"> Heatwave Warnings</label>
        <label style="margin-left:1em;"><input type="checkbox" id="togglePredictiveRisk"> Predictive Risk Areas</label>
      </div>
      <div id="hazardMap" style="height: 500px; width: 100%;"></div>
      <div id="mapLoadingSpinner" class="loading-spinner" style="display: none;"></div>
      <div id="hazardLegend" class="card" style="margin-top: 1em; padding: 1em;">
        <h3>Map Legend</h3>
        <div id="legendContent"></div>
      </div>
    </section>

    <section class="predictive-resource-section card" style="margin-top: 1.5em;">
      <h2>Predictive Resource Allocation</h2>
      <div class="controls" style="margin-bottom: 1em;">
        <label for="currentWeather">Current Weather:</label>
        <select id="currentWeather" style="margin-right: 1em;">
          <option value="dry">Dry & Hot</option>
          <option value="wet">Wet & Cool</option>
          <option value="windy">Windy</option>
        </select>
        <label for="historicalDensity">Historical Fire Density:</label>
        <select id="historicalDensity">
          <option value="high">High</option>
          <option value="medium">Medium</option>
          <option value="low">Low</option>
        </select>
        <button id="simulateAllocation" style="margin-left: 1em;">Simulate Optimal Placement</button>
      </div>
      <div id="resourceAllocationMap" style="height: 400px; width: 100%; margin-bottom: 1em;"></div>
      <div id="allocationResults">
        <h4>Optimal Staging Points:</h4>
        <ul id="stagingPointsList">
          <li>No simulation run yet.</li>
        </ul>
        <h4>Impact vs. Resources Trade-offs:</h4>
        <p id="tradeOffs">Select simulation parameters to see trade-offs.</p>
      </div>
    </section>

    <section class="risk-analytics-section card" style="margin-top: 1.5em;">
      <h2>Risk Analytics</h2>
      <div class="controls" style="margin-bottom: 1em;">
        <label for="windSpeed">Wind Speed (km/h):</label>
        <input type="number" id="windSpeed" value="20" min="0" max="100" style="width: 80px; margin-right: 1em;">
        <label for="humidity">Humidity (%):</label>
        <input type="number" id="humidity" value="30" min="0" max="100" style="width: 80px; margin-right: 1em;">
        <button id="simulateFireFlood">Simulate Fire/Flood Spread</button>
      </div>
      <div id="simulationMap" style="height: 400px; width: 100%; margin-bottom: 1em;"></div>
      <div id="communityVulnerability">
        <h4>Community Vulnerability Score:</h4>
        <p>Enter a suburb to get its vulnerability score.</p>
        <input type="text" id="vulnerabilitySuburbInput" placeholder="e.g., Perth Hills" style="padding:0.5em 1em;border-radius:6px;border:1px solid #ccc;font-size:1em;flex:1;">
        <button id="getVulnerabilityScore" style="margin-left: 1em;">Get Score</button>
        <p id="vulnerabilityScoreResult" style="font-weight: bold; margin-top: 0.5em;">Score: N/A</p>
      </div>
    </section>

    <section class="bushfire-tech-section card" style="margin-top: 1.5em;">
      <h2>Bushfire Technical Services</h2>
      <div class="controls" style="margin-bottom: 1em;">
        <label for="satelliteData">Satellite Data Source:</label>
        <select id="satelliteData" style="margin-right: 1em;">
          <option value="sentinel">Sentinel</option>
          <option value="landsat">Landsat</option>
        </select>
        <button id="loadFuelLoadMap">Load Fuel Load Map</button>
      </div>
      <div id="fuelLoadMap" style="height: 400px; width: 100%; margin-bottom: 1em;"></div>
      <div id="fuelLoadLegend" class="card" style="margin-top: 1em; padding: 1em;">
        <h3>Fuel Load Legend</h3>
        <div id="fuelLegendContent">
          <p><span style="display:inline-block;width:20px;height:20px;background-color:#e74c3c;border-radius:3px;vertical-align:middle;"></span> High Grass Load</p>
          <p><span style="display:inline-block;width:20px;height:20px;background-color:#f39c12;border-radius:3px;vertical-align:middle;"></span> Medium Grass Load</p>
          <p><span style="display:inline-block;width:20px;height:20px;background-color:#2ecc71;border-radius:3px;vertical-align:middle;"></span> Low Grass Load</p>
        </div>
      </div>
    </section>

    <section class="interactive-timeline-section card" style="margin-top: 1.5em;">
      <h2>Interactive Timeline</h2>
      <div class="timeline-controls" style="margin-bottom: 1em; display: flex; gap: 0.5em; flex-wrap: wrap;">
        <button id="timelineNowBtn">Now</button>
        <button id="timelinePrev24Btn">-24 h</button>
        <button id="timelineNext24Btn">+24 h</button>
        <label style="margin-left: 1em;"><input type="checkbox" id="timelineFilterBushfires" checked> Bushfires</label>
        <label style="margin-left: 0.5em;"><input type="checkbox" id="timelineFilterFloods"> Floods</label>
        <label style="margin-left: 0.5em;"><input type="checkbox" id="timelineFilterStorms"> Storms</label>
        <label style="margin-left: 0.5em;"><input type="checkbox" id="timelineFilterHeatwaves"> Heatwaves</label>
      </div>
      <div class="timeline-container" style="overflow-x: auto; padding-bottom: 1em;">
        <div id="timeline" class="timeline" style="display: flex; position: relative; height: 100px; align-items: center;">
          <!-- Timeline events will be injected here -->
        </div>
      </div>
      <div id="timelineDetails" class="card" style="margin-top: 1em; padding: 1em; display: none;">
        <h3>Event Details</h3>
        <p id="timelineEventTitle"></p>
        <p id="timelineEventTime"></p>
        <p id="timelineEventDescription"></p>
        <a id="timelineEventLink" href="#" target="_blank" style="display: none;">View Details</a>
      </div>
    </section>


    <section class="personalised-alerts-section card" style="margin-top: 1.5em;">
      <h2>Personalised Alerts</h2>
      <p>Receive real-time updates for hazards in your area. Enter your location or use GPS to get started.</p>

      <div class="alert-setup-container">
        <h3>1. Set Your Location</h3>
        <div style="display:flex;align-items:center;gap:0.5em;margin-bottom:0.7em;">
          <input
            id="alertLocationInput"
            type="text"
            placeholder="Enter suburb or postcode"
            style="flex:1;padding:0.5em 1em;border-radius:6px;border:1px solid #ccc;font-size:1em;"
            aria-label="Enter suburb or postcode for alerts"
          />
          <button
            id="alertFindMeBtn"
            class="cta-button"
            aria-label="Find my current location for alerts"
            title="Find my current location"
          >üìç Use My Location</button>
        </div>
        <p id="selectedAlertLocation" style="font-weight: bold; margin-top: 0.5em;">Location: Not set</p>
      </div>

      <div class="subscription-options" style="margin-top: 1.5em;">
        <h3>2. Alert Preferences</h3>
        <form id="alertSubscriptionForm">
          <div style="margin-bottom: 1em;">
            <h4>Receive alerts via:</h4>
            <label><input type="checkbox" name="alertMethod" value="email" checked> Email</label>
            <label style="margin-left: 1em;"><input type="checkbox" name="alertMethod" value="sms"> SMS</label>
            <label style="margin-left: 1em;"><input type="checkbox" name="alertMethod" value="push"> Push Notifications</label>
          </div>

          <div style="margin-bottom: 1em;">
            <h4>Alert Risk Level:</h4>
            <div class="toggle-group" id="alertRiskLevelToggles">
              <button type="button" class="toggle-button active" data-value="all">All hazards</button>
              <button type="button" class="toggle-button" data-value="high-risk">High-risk only</button>
            </div>
          </div>

          <div style="margin-bottom: 1em;">
            <h4>Specific Hazard Types:</h4>
            <div class="toggle-group" id="specificHazardTypeToggles">
              <button type="button" class="toggle-button active" data-value="fire">üî• Fire</button>
              <button type="button" class="toggle-button" data-value="flood">üåä Flood</button>
              <button type="button" class="toggle-button" data-value="storm">‚õàÔ∏è Storm</button>
              <button type="button" class="toggle-button" data-value="heatwave">‚òÄÔ∏è Heatwave</button>
            </div>
          </div>

          <button type="submit" class="cta-button primary-button">Subscribe to Alerts</button>
          <button type="button" id="testAlertBtn" class="cta-button secondary-button">Send Test Alert</button>
        </form>
      </div>

      <div class="local-hazard-dashboard" style="margin-top: 1.5em;">
        <h3>3. Local Hazard Dashboard</h3>
        <p id="dashboardStatus">Loading hazards for your location...</p>
        <div id="activeIncidentsList" style="margin-top: 1em;">
          <!-- Active incidents will be displayed here -->
          <p>No active incidents found within 50 km of your location.</p>
        </div>
        <div id="dashboardMap" style="height: 300px; width: 100%; margin-top: 1em; border-radius: 8px; display: none;"></div>
        <div id="dashboardLoadingSpinner" class="loading-spinner" style="display: none;"></div>
      </div>

      <div class="alert-examples" style="margin-top: 1.5em;">
        <h3>4. Alert Examples</h3>
        <div class="card" style="padding: 1em; border-left: 5px solid #c0392b;">
          <h4>Email Alert Example:</h4>
          <p><strong>Subject: Bushfire Watch - Near Perth Hills</strong></p>
          <p>Dear User,</p>
          <p>A Bushfire Watch and Act alert has been issued <strong>8 km NE from your location (Perth Hills)</strong>. Stay alert and monitor conditions.</p>
          <p><strong>Status:</strong> Watch and Act</p>
          <p><strong>Distance:</strong> 8 km NE</p>
          <p><strong>Actions:</strong> View DFES emergency page: [Link to DFES]</p>
          <p>Stay safe,</p>
          <p>Australian Bushfire Alert System Team</p>
        </div>
        <div class="card" style="padding: 1em; border-left: 5px solid #1976d2; margin-top: 1em;">
          <h4>SMS Alert Example:</h4>
          <p><strong>BUSHFIRE ADVICE:</strong> 15km SW from Bunbury. Monitor conditions. Info: [Link]</p>
        </div>
      </div>

      <div class="emergency-quick-actions" style="margin-top: 1.5em;">
        <h3>5. Emergency Quick Actions</h3>
        <div style="display: flex; flex-wrap: wrap; gap: 1em;">
          <button class="quick-action-btn" style="padding:0.7em 1.2em;border-radius:6px;background:#dc3545;color:#fff;border:none;cursor:pointer;font-size:0.9em;">
            <img src="assets/emergency-icon.svg" alt="Evacuation" width="20" height="20" style="vertical-align:middle; margin-right: 5px;"> Find nearest evacuation centre
          </button>
          <button class="quick-action-btn" style="padding:0.7em 1.2em;border-radius:6px;background:#007bff;color:#fff;border:none;cursor:pointer;font-size:0.9em;">
            <img src="assets/advice-icon.svg" alt="DFES" width="20" height="20" style="vertical-align:middle; margin-right: 5px;"> View DFES emergency page
          </button>
          <button class="quick-action-btn" style="padding:0.7em 1.2em;border-radius:6px;background:#6c757d;color:#fff;border:none;cursor:pointer;font-size:0.9em;">
            <img src="assets/ew-storm-damage.svg" alt="Checklist" width="20" height="20" style="vertical-align:middle; margin-right: 5px;"> Download emergency checklist
          </button>
        </div>
      </div>
    </section>


    <section class="community-safety-checklist-section card" style="margin-top: 1.5em;">
      <h2>Community Safety Checklist</h2>
      <p>Prepare for emergencies with our interactive checklist, based on trusted sources like AAMI, DFES WA, and Tasmanian Fire Service.</p>

      <div class="checklist-progress-bar" style="margin-bottom: 1.5em; background-color: #e0e0e0; border-radius: 5px; height: 20px; overflow: hidden;">
        <div id="checklistProgressBar" style="width: 0%; height: 100%; background-color: #28a745; border-radius: 5px; text-align: center; color: white; line-height: 20px; font-size: 0.8em; transition: width 0.5s ease-in-out;">0% Complete</div>
      </div>

      <div class="checklist-accordion">
        <div class="accordion-item">
          <button class="accordion-header" aria-expanded="false">
            <h3>Before a Fire</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <ul class="checklist-items">
              <li><label><input type="checkbox" data-tip="Clear leaves, twigs, and other flammable materials from gutters and around your home."> Clean gutters and clear defendable space around home <span class="info-icon" title="What counts as 'defendable space'?">‚ÑπÔ∏è</span></label></li>
              <li><label><input type="checkbox" data-tip="Ensure your emergency kit includes first aid, medications, important documents, food, water, and a battery-powered radio."> Prepare an emergency kit with essentials <span class="info-icon" title="What should be in my emergency kit?">‚ÑπÔ∏è</span></label></li>
              <li><label><input type="checkbox" data-tip="Have at least 3 days of water per person and pet, stored in sealed containers."> Have 3 days of water supply <span class="info-icon" title="How much water is sufficient‚Äîand how to store it?">‚ÑπÔ∏è</span></label></li>
              <li><label><input type="checkbox" data-tip="Develop a bushfire survival plan"> Develop a bushfire survival plan</label></li>
              <li><label><input type="checkbox" data-tip="Ensure all family members know the plan and practice it regularly."> Discuss plan with all household members</label></li>
              <li><label><input type="checkbox" data-tip="Check and maintain smoke alarms regularly."> Check smoke alarms</label></li>
              <li><label><input type="checkbox" data-tip="Ensure hoses are long enough to reach all parts of your property and are in good working order."> Check hose lengths and water pressure</label></li>
            </ul>
          </div>
        </div>

        <div class="accordion-item">
          <button class="accordion-header" aria-expanded="false">
            <h3>During a Fire</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <ul class="checklist-items">
              <li><label><input type="checkbox" data-tip="Stay informed by monitoring official emergency broadcasts (radio, TV, emergency apps)."> Monitor emergency broadcasts</label></li>
              <li><label><input type="checkbox" data-tip="If advised to evacuate, do so immediately. Follow designated routes."> Evacuate if advised</label></li>
              <li><label><input type="checkbox" data-tip="If staying, wear protective clothing (long sleeves, pants, sturdy shoes, hat, mask)."> Wear protective clothing</label></li>
              <li><label><input type="checkbox" data-tip="Close all windows and doors to prevent embers from entering."> Close windows and doors</label></li>
              <li><label><input type="checkbox" data-tip="Turn off gas and electricity if safe to do so."> Turn off gas and electricity</label></li>
            </ul>
          </div>
        </div>

        <div class="accordion-item">
          <button class="accordion-header" aria-expanded="false">
            <h3>After a Fire</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <ul class="checklist-items">
              <li><label><input type="checkbox" data-tip="Do not return to your property until authorities declare it safe."> Wait for official 'all clear'</label></li>
              <li><label><input type="checkbox" data-tip="Be aware of hazards like hot spots, unstable structures, and fallen power lines."> Check for hazards (hot spots, power lines)</label></li>
              <li><label><input type="checkbox" data-tip="Contact your insurance company as soon as possible."> Contact insurance company</label></li>
              <li><label><input type="checkbox" data-tip="Seek support from emergency services or community groups if needed."> Seek support if needed</label></li>
            </ul>
          </div>
        </div>
      </div>

      <div class="checklist-actions" style="margin-top: 2em; display: flex; flex-wrap: wrap; gap: 1em;">
        <button id="downloadChecklistPdf" style="padding:0.7em 1.5em;border-radius:6px;background:#dc3545;color:#fff;border:none;cursor:pointer;font-size:1em;">Download Checklist PDF</button>
        <button id="emailChecklist" style="padding:0.7em 1.5em;border-radius:6px;background:#007bff;color:#fff;border:none;cursor:pointer;font-size:1em;">Email My Checklist</button>
        <button id="saveChecklistProgress" style="padding:0.7em 1.5em;border-radius:6px;background:#6c757d;color:#fff;border:none;cursor:pointer;font-size:1em;">Save Progress</button>
        <button id="loadChecklistProgress" style="padding:0.7em 1.5em;border-radius:6px;background:#6c757d;color:#fff;border:none;cursor:pointer;font-size:1em;">Load Progress</button>
      </div>
    </section>


  </main>
  <div id="toastNotification" class="toast-notification" style="display: none;"></div>
  <footer>
    <div style="font-weight:bold;color:#c0392b;">
      ‚ö†Ô∏è Not for Operational Use. For demonstration only.<br>
      Data sources: <a href="https://www.bom.gov.au/" target="_blank">Bureau of Meteorology</a>, <a href="https://afdrs.com.au/" target="_blank">AFDRS</a>, <a href="https://firms.modaps.eosdis.nasa.gov/" target="_blank">NASA FIRMS</a>
    </div>
    <p>Based on AFDRS and the <a href="https://www.australianwarningsystem.com.au/" target="_blank">Australian Warning System</a>.</p>
  </footer>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <!-- Google Places API for Autocomplete -->
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places"></script>
  <script src="hazard.js"></script>
  <script src="script.js"></script>
</body>
</html>
